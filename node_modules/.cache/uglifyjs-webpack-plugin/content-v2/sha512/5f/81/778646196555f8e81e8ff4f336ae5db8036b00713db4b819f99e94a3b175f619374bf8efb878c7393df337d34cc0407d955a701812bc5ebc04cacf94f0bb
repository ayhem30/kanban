{"code":"module.exports=function(e){var t={};function n(a){if(t[a])return t[a].exports;var r=t[a]={i:a,l:!1,exports:{}};return e[a].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,a){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:a})},n.r=function(e){Object.defineProperty(e,\"__esModule\",{value:!0})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,\"a\",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p=\"\",n(n.s=31)}([function(e,t){e.exports=require(\"react\")},function(e,t){e.exports=require(\"@babel/runtime/helpers/builtin/assertThisInitialized\")},function(e,t){e.exports=require(\"@babel/runtime/helpers/builtin/defineProperty\")},function(e,t){e.exports=require(\"@babel/runtime/helpers/builtin/objectSpread\")},function(e,t){e.exports=require(\"@babel/runtime/helpers/builtin/inheritsLoose\")},function(e,t){e.exports=require(\"react-redux\")},function(e,t){e.exports=require(\"react-router-dom\")},function(e,t){e.exports=require(\"react-beautiful-dnd\")},function(e,t){e.exports=require(\"react-aria-menubutton\")},function(e,t){e.exports=require(\"react-textarea-autosize\")},function(e,t){e.exports=require(\"classnames\")},function(e,t){e.exports=require(\"@babel/runtime/helpers/builtin/objectWithoutProperties\")},function(e,t){e.exports=require(\"react-icons/lib/fa/trash\")},function(e,t){e.exports=require(\"@babel/runtime/helpers/builtin/extends\")},function(e,t){e.exports=require(\"shortid\")},function(e,t){e.exports=require(\"react-head\")},function(e,t){e.exports=require(\"normalizr\")},function(e,t){e.exports=require(\"express\")},function(e,t){e.exports=require(\"slugify\")},function(e,t){e.exports=require(\"react-router\")},function(e,t){e.exports=require(\"redux\")},function(e,t){e.exports=require(\"react-modal\")},function(e,t){e.exports=require(\"react-dom/server\")},function(e,t){e.exports=require(\"fs\")},function(e,t){e.exports=require(\"passport\")},function(e,t){e.exports=require(\"marked\")},function(e,t){e.exports=require(\"react-onclickoutside\")},function(e,t){e.exports=require(\"morgan\")},function(e,t){e.exports=require(\"serve-favicon\")},function(e,t){e.exports=require(\"helmet\")},function(e,t){e.exports=require(\"compression\")},function(e,t,n){\"use strict\";n.r(t);var a=n(17),r=n.n(a),i=n(24),o=n.n(i),l=n(30),s=n.n(l),c=n(29),d=n.n(c),u=n(28),p=n.n(u),m=n(27),h=n.n(m),f=n(23),b=n(0),E=n.n(b),y=n(22),v=n(20),g=n(5),C=n(19),I=n(15),w=n(7),x=n(6),D=n(4),T=n.n(D),O=n(1),N=n.n(O),S=n(2),_=n.n(S),A=n(18),k=n.n(A),R=n(10),L=n.n(R),B=(n(45),function(e){function t(){for(var t,n,a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return t=n=e.call.apply(e,[this].concat(r))||this,_()(N()(N()(n)),\"render\",function(){return E.a.createElement(\"header\",null,E.a.createElement(x.Link,{to:\"/\",className:\"header-title\"},\"React Redux Kanban Board\"))}),t||N()(n)}return T()(t,e),t}(b.Component)),M=n(14),q=n.n(M),j=n(26),K=n.n(j),F=function(e){function t(){for(var t,n,a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return t=n=e.call.apply(e,[this].concat(r))||this,_()(N()(N()(n)),\"handleClickOutside\",function(){return n.props.handleClickOutside()}),_()(N()(N()(n)),\"render\",function(){return n.props.children}),t||N()(n)}return T()(t,e),t}(b.Component),X=K()(F),H=function(e){function t(){var t;return t=e.call(this)||this,_()(N()(N()(t)),\"toggleOpen\",function(){t.setState({isOpen:!t.state.isOpen})}),_()(N()(N()(t)),\"handleChange\",function(e){t.setState({title:e.target.value})}),_()(N()(N()(t)),\"handleSubmit\",function(e){e.preventDefault();var n=t.state.title;if(\"\"!==n){var a=t.props,r=a.dispatch,i=a.history,o=a.userId,l=q.a.generate();r({type:\"ADD_BOARD\",payload:{boardTitle:n,boardId:l,userId:o}});var s=k()(n,{lower:!0});i.push(\"/b/\"+l+\"/\"+s),t.setState({isOpen:!1,title:\"\"})}}),_()(N()(N()(t)),\"handleKeyDown\",function(e){27===e.keyCode&&t.setState({isOpen:!1})}),_()(N()(N()(t)),\"render\",function(){var e=t.state,n=e.isOpen,a=e.title;return n?E.a.createElement(X,{handleClickOutside:t.toggleOpen},E.a.createElement(\"form\",{onSubmit:t.handleSubmit,className:\"board-adder\"},E.a.createElement(\"input\",{autoFocus:!0,className:\"submit-board-input\",type:\"text\",value:a,onKeyDown:t.handleKeyDown,onChange:t.handleChange,spellCheck:!1}),E.a.createElement(\"input\",{type:\"submit\",value:\"Create\",className:\"submit-board-button\",disabled:\"\"===a}))):E.a.createElement(\"button\",{onClick:t.toggleOpen,className:\"add-board-button\"},\"Add a new board...\")}),t.state={isOpen:!1,title:\"\"},t}return T()(t,e),t}(b.Component),P=Object(g.connect)(function(e){return{userId:e.user?e.user._id:\"guest\"}})(H),U=(n(44),function(e){function t(){for(var t,n,a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return t=n=e.call.apply(e,[this].concat(r))||this,_()(N()(N()(n)),\"render\",function(){var e=n.props,t=e.boards,a=e.listsById,r=e.history;return E.a.createElement(E.a.Fragment,null,E.a.createElement(I.Title,null,\"Home | React Kanban\"),E.a.createElement(B,null),E.a.createElement(\"div\",{className:\"home\"},E.a.createElement(\"div\",{className:\"main-content\"},E.a.createElement(\"h1\",null,\"Boards\"),E.a.createElement(\"div\",{className:\"boards\"},t.map(function(e){return E.a.createElement(x.Link,{key:e._id,className:L()(\"board-link\",\"blue\"),to:\"/b/\"+e._id+\"/\"+k()(e.title,{lower:!0})},E.a.createElement(\"div\",{className:\"board-link-title\"},e.title),E.a.createElement(\"div\",{className:\"mini-board\"},e.lists.map(function(e){return E.a.createElement(\"div\",{key:e,className:\"mini-list\",style:{height:Math.min(18*(a[e].cards.length+1),100)+\"%\"}})})))}),E.a.createElement(P,{history:r})))))}),t||N()(n)}return T()(t,e),t}(b.Component)),G=Object(g.connect)(function(e){var t=e.boardsById,n=e.listsById;return{boards:Object.keys(t).map(function(e){return t[e]}),listsById:n}})(U),W=n(13),z=n.n(W),V=n(9),J=n.n(V),Y=n(8),Q=n(12),Z=n.n(Q),$=(n(43),function(e){function t(t){var n;return n=e.call(this,t)||this,_()(N()(N()(n)),\"handleChange\",function(e){n.setState({newTitle:e.target.value})}),_()(N()(N()(n)),\"handleKeyDown\",function(e){13===e.keyCode?(e.preventDefault(),n.handleSubmit()):27===e.keyCode&&n.revertTitle()}),_()(N()(N()(n)),\"handleSubmit\",function(){var e=n.state.newTitle,t=n.props,a=t.listTitle,r=t.listId,i=t.dispatch;\"\"!==e&&(e!==a&&i({type:\"CHANGE_LIST_TITLE\",payload:{listTitle:e,listId:r}}),n.setState({isOpen:!1}))}),_()(N()(N()(n)),\"revertTitle\",function(){n.setState({newTitle:n.props.listTitle,isOpen:!1})}),_()(N()(N()(n)),\"deleteList\",function(){var e=n.props,t=e.listId,a=e.cards,r=e.boardId;(0,e.dispatch)({type:\"DELETE_LIST\",payload:{cards:a,listId:t,boardId:r}})}),_()(N()(N()(n)),\"openTitleEditor\",function(){n.setState({isOpen:!0})}),_()(N()(N()(n)),\"handleButtonKeyDown\",function(e){13===e.keyCode&&(e.preventDefault(),n.openTitleEditor())}),n.state={isOpen:!1,newTitle:t.listTitle},n}return T()(t,e),t.prototype.render=function(){var e=this,t=this.state,n=t.isOpen,a=t.newTitle,r=this.props,i=r.dragHandleProps,o=r.listTitle;return E.a.createElement(\"div\",{className:\"list-header\"},n?E.a.createElement(\"div\",{className:\"list-title-textarea-wrapper\"},E.a.createElement(J.a,{autoFocus:!0,useCacheForDOMMeasurements:!0,value:a,onChange:this.handleChange,onKeyDown:this.handleKeyDown,className:\"list-title-textarea\",onBlur:this.handleSubmit,spellCheck:!1})):E.a.createElement(\"div\",z()({},i,{role:\"button\",tabIndex:0,onClick:this.openTitleEditor,onKeyDown:function(t){e.handleButtonKeyDown(t),i.onKeyDown(t)},className:\"list-title-button\"}),o),E.a.createElement(Y.Wrapper,{className:\"delete-list-wrapper\",onSelection:this.deleteList},E.a.createElement(Y.Button,{className:\"delete-list-button\"},E.a.createElement(Z.a,null)),E.a.createElement(Y.Menu,{className:\"delete-list-menu\"},E.a.createElement(\"div\",{className:\"delete-list-header\"},\"Are you sure?\"),E.a.createElement(Y.MenuItem,{className:\"delete-list-confirm\"},\"Delete\"))))},t}(b.Component)),ee=Object(g.connect)()($),te=n(3),ne=n.n(te),ae=n(21),re=n.n(ae),ie=(n(42),function(e){function t(){for(var t,n,a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return t=n=e.call.apply(e,[this].concat(r))||this,_()(N()(N()(n)),\"deleteCard\",function(){var e=n.props,t=e.dispatch,a=e.listId;t({type:\"DELETE_CARD\",payload:{cardId:e.card._id,listId:a}})}),t||N()(n)}return T()(t,e),t.prototype.render=function(){var e=this.props.isCardNearRightBorder;return E.a.createElement(\"div\",{className:\"options-list\",style:{alignItems:e?\"flex-end\":\"flex-start\"}},E.a.createElement(\"div\",null,E.a.createElement(\"button\",{onClick:this.deleteCard,className:\"options-list-button\"},E.a.createElement(\"div\",{className:\"modal-icon\"},E.a.createElement(Z.a,null)),\" Delete\")))},t}(b.Component)),oe=Object(g.connect)()(ie),le=(n(41),function(e){function t(t){var n;return n=e.call(this,t)||this,_()(N()(N()(n)),\"componentWillReceiveProps\",function(e){n.setState({newText:e.card.text})}),_()(N()(N()(n)),\"handleKeyDown\",function(e){13===e.keyCode&&!1===e.shiftKey&&(e.preventDefault(),n.submitCard())}),_()(N()(N()(n)),\"submitCard\",function(){var e=n.state.newText,t=n.props,a=t.card,r=t.listId,i=t.dispatch,o=t.toggleCardEditor;\"\"===e?n.deleteCard():e!==a.text&&i({type:\"CHANGE_CARD_TEXT\",payload:{cardText:e,cardId:a._id,listId:r}}),o()}),_()(N()(N()(n)),\"handleChange\",function(e){n.setState({newText:e.target.value})}),_()(N()(N()(n)),\"handleRequestClose\",function(){(0,n.props.toggleCardEditor)()}),n.state={newText:t.card.text,isTextareaFocused:!0},\"undefined\"!=typeof document&&re.a.setAppElement(\"#app\"),n}return T()(t,e),t.prototype.render=function(){var e=this,t=this.state,n=t.newText,a=t.isTextareaFocused,r=this.props,i=r.cardElement,o=r.card,l=r.listId,s=r.isOpen;if(!i)return null;var c=i.getBoundingClientRect(),d=window.innerWidth-c.right<c.left,u=window.innerWidth<550,p={content:{top:Math.min(c.top,window.innerHeight-c.height-18),left:d?null:c.left,right:d?window.innerWidth-c.right:null,flexDirection:d?\"row-reverse\":\"row\"}};return E.a.createElement(re.a,{closeTimeoutMS:150,isOpen:s,onRequestClose:this.handleRequestClose,contentLabel:\"Card editor\",overlayClassName:\"modal-underlay\",className:\"modal\",style:u?{content:{flexDirection:\"column\",top:3,left:3,right:3}}:p,includeDefaultStyles:!1,onClick:this.handleRequestClose},E.a.createElement(\"div\",{className:\"modal-textarea-wrapper\",style:{minHeight:u?\"none\":c.height,width:u?\"100%\":c.width,boxShadow:a?\"0px 0px 3px 2px rgb(0, 180, 255)\":null}},E.a.createElement(J.a,{autoFocus:!0,useCacheForDOMMeasurements:!0,value:n,onChange:this.handleChange,onKeyDown:this.handleKeyDown,className:\"modal-textarea\",spellCheck:!1,onFocus:function(){return e.setState({isTextareaFocused:!0})},onBlur:function(){return e.setState({isTextareaFocused:!1})}})),E.a.createElement(oe,{card:o,listId:l,boundingRect:c,isCardNearRightBorder:d,isThinDisplay:u}))},t}(b.Component)),se=Object(g.connect)()(le),ce=n(25),de=n.n(ce),ue=function(e){var t=0;return de()(e,{sanitize:!0,gfm:!0,breaks:!0}).replace(/<a/g,'<a target=\"_blank\"').replace(/\\[(\\s|x)\\]/g,function(e){var n;return n=\"[ ]\"===e?\"<input id=\"+t+' onclick=\"return false\" type=\"checkbox\">':\"<input id=\"+t+' checked onclick=\"return false\" type=\"checkbox\">',t+=1,n})},pe=(n(40),function(e){function t(){var t;return t=e.call(this)||this,_()(N()(N()(t)),\"toggleCardEditor\",function(){t.setState({isModalOpen:!t.state.isModalOpen})}),_()(N()(N()(t)),\"handleClick\",function(e){var n=e.target,a=n.tagName,r=n.checked,i=n.id;\"input\"===a.toLowerCase()?t.toggleCheckbox(r,parseInt(i,10)):\"a\"!==a.toLowerCase()&&t.toggleCardEditor(e)}),_()(N()(N()(t)),\"handleKeyDown\",function(e){13===e.keyCode&&\"a\"!==e.target.tagName.toLowerCase()&&(e.preventDefault(),t.toggleCardEditor())}),_()(N()(N()(t)),\"toggleCheckbox\",function(e,n){var a=t.props,r=a.card,i=a.dispatch,o=0,l=r.text.replace(/\\[(\\s|x)\\]/g,function(t){var a;return a=n===o?e?\"[x]\":\"[ ]\":t,o+=1,a});i({type:\"CHANGE_CARD_TEXT\",payload:{cardId:r._id,cardText:l}})}),t.state={isModalOpen:!1},t}return T()(t,e),t.prototype.render=function(){var e=this,t=this.props,n=t.card,a=t.index,r=t.listId,i=t.isDraggingOver,o=this.state.isModalOpen;!function(e){var t=e.match(/\\[(\\s|x)\\]/g)||[],n=t.filter(function(e){return\"[x]\"===e}).length;t.length}(n.text);return E.a.createElement(E.a.Fragment,null,E.a.createElement(w.Draggable,{draggableId:n._id,index:a},function(t,a){return E.a.createElement(E.a.Fragment,null,E.a.createElement(\"div\",z()({className:L()(\"card-title\",{\"card-title--drag\":a.isDragging}),ref:function(n){t.innerRef(n),e.ref=n}},t.draggableProps,t.dragHandleProps,{onClick:function(n){t.dragHandleProps.onClick(n),e.handleClick(n)},onKeyDown:function(n){t.dragHandleProps.onKeyDown(n),e.handleKeyDown(n)},style:ne()({},t.draggableProps.style,{background:n.color})}),E.a.createElement(\"div\",{className:\"card-title-html\",dangerouslySetInnerHTML:{__html:ue(n.text)}})),i&&t.placeholder)}),E.a.createElement(se,{isOpen:o,cardElement:this.ref,card:n,listId:r,toggleCardEditor:this.toggleCardEditor}))},t}(b.Component)),me=Object(g.connect)(function(e,t){return{card:e.cardsById[t.cardId]}})(pe),he=function(e){function t(){for(var t,n,a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return t=n=e.call.apply(e,[this].concat(r))||this,_()(N()(N()(n)),\"componentDidUpdate\",function(e){n.props.cards[n.props.cards.length-2]===e.cards[e.cards.length-1]&&n.scrollToBottom()}),_()(N()(N()(n)),\"scrollToBottom\",function(){n.listEnd.scrollIntoView()}),t||N()(n)}return T()(t,e),t.prototype.render=function(){var e=this,t=this.props,n=t.listId,a=t.cards;return E.a.createElement(w.Droppable,{droppableId:n},function(t,r){var i=r.isDraggingOver;return E.a.createElement(E.a.Fragment,null,E.a.createElement(\"div\",{className:\"cards\",ref:t.innerRef},a.map(function(e,t){return E.a.createElement(me,{isDraggingOver:i,key:e,cardId:e,index:t,listId:n})}),t.placeholder,E.a.createElement(\"div\",{style:{float:\"left\",clear:\"both\"},ref:function(t){e.listEnd=t}})))})},t}(b.Component),fe=Object(g.connect)(function(e,t){return{cards:e.listsById[t.listId].cards}})(he),be=(n(39),function(e){function t(){var t;return t=e.call(this)||this,_()(N()(N()(t)),\"toggleCardComposer\",function(){t.setState({isOpen:!t.state.isOpen})}),_()(N()(N()(t)),\"handleChange\",function(e){t.setState({newText:e.target.value})}),_()(N()(N()(t)),\"handleKeyDown\",function(e){13===e.keyCode&&!1===e.shiftKey?t.handleSubmit(e):27===e.keyCode&&t.toggleCardComposer()}),_()(N()(N()(t)),\"handleSubmit\",function(e){e.preventDefault();var n=t.state.newText,a=t.props,r=a.listId,i=a.dispatch;\"\"!==n&&(i({type:\"ADD_CARD\",payload:{cardText:n,cardId:q.a.generate(),listId:r}}),t.toggleCardComposer(),t.setState({newText:\"\"}))}),t.state={newText:\"\",isOpen:!1},t}return T()(t,e),t.prototype.render=function(){var e=this.state,t=e.newText;return e.isOpen?E.a.createElement(X,{handleClickOutside:this.toggleCardComposer},E.a.createElement(\"form\",{onSubmit:this.handleSubmit,className:\"card-adder-textarea-wrapper\"},E.a.createElement(J.a,{autoFocus:!0,useCacheForDOMMeasurements:!0,minRows:1,onChange:this.handleChange,onKeyDown:this.handleKeyDown,value:t,className:\"card-adder-textarea\",placeholder:\"Add a new card...\",spellCheck:!1,onBlur:this.toggleCardComposer}))):E.a.createElement(\"button\",{onClick:this.toggleCardComposer,className:\"add-card-button\"},\"+\")},t}(b.Component)),Ee=Object(g.connect)()(be),ye=(n(38),function(e){function t(){for(var t,n,a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return t=n=e.call.apply(e,[this].concat(r))||this,_()(N()(N()(n)),\"render\",function(){var e=n.props,t=e.list,a=e.boardId,r=e.index;return E.a.createElement(w.Draggable,{draggableId:t._id,index:r,disableInteractiveElementBlocking:!0},function(e,n){return E.a.createElement(E.a.Fragment,null,E.a.createElement(\"div\",z()({ref:e.innerRef},e.draggableProps,{className:\"list-wrapper\"}),E.a.createElement(\"div\",{className:L()(\"list\",{\"list--drag\":n.isDragging})},E.a.createElement(ee,{dragHandleProps:e.dragHandleProps,listTitle:t.title,listId:t._id,cards:t.cards,boardId:a}),E.a.createElement(\"div\",{className:\"cards-wrapper\"},E.a.createElement(fe,{listId:t._id}))),E.a.createElement(Ee,{listId:t._id})),e.placeholder)})}),t||N()(n)}return T()(t,e),t}(b.Component)),ve=Object(g.connect)()(ye),ge=(n(37),function(e){function t(){var t;return t=e.call(this)||this,_()(N()(N()(t)),\"handleBlur\",function(){t.setState({isOpen:!1})}),_()(N()(N()(t)),\"handleChange\",function(e){t.setState({listTitle:e.target.value})}),_()(N()(N()(t)),\"handleKeyDown\",function(e){13===e.keyCode?(e.preventDefault(),t.handleSubmit()):27===e.keyCode&&t.setState({isOpen:!1,listTitle:\"\"})}),_()(N()(N()(t)),\"handleSubmit\",function(){var e=t.props,n=e.dispatch,a=e.boardId,r=t.state.listTitle,i=q.a.generate();\"\"!==r&&(n({type:\"ADD_LIST\",payload:{listTitle:r,listId:i,boardId:a}}),t.setState({isOpen:!1,listTitle:\"\"}))}),_()(N()(N()(t)),\"render\",function(){var e=t.state,n=e.isOpen,a=e.listTitle;return n?E.a.createElement(\"div\",{className:\"list\"},E.a.createElement(J.a,{autoFocus:!0,useCacheForDOMMeasurements:!0,value:a,onChange:t.handleChange,onKeyDown:t.handleKeyDown,className:\"list-adder-textarea\",onBlur:t.handleBlur,spellCheck:!1})):E.a.createElement(\"button\",{onClick:function(){return t.setState({isOpen:!0})},className:\"add-list-button\"},\"Add a new list...\")}),t.state={isOpen:!1,listTitle:\"\"},t}return T()(t,e),t}(b.Component)),Ce=Object(g.connect)()(ge),Ie=(n(36),function(e){function t(t){var n;return n=e.call(this,t)||this,_()(N()(N()(n)),\"handleClick\",function(){n.setState({isOpen:!0})}),_()(N()(N()(n)),\"handleChange\",function(e){n.setState({newTitle:e.target.value})}),_()(N()(N()(n)),\"submitTitle\",function(){var e=n.props,t=e.dispatch,a=e.boardId,r=e.boardTitle,i=n.state.newTitle;\"\"!==i&&(r!==i&&t({type:\"CHANGE_BOARD_TITLE\",payload:{boardTitle:i,boardId:a}}),n.setState({isOpen:!1}))}),_()(N()(N()(n)),\"revertTitle\",function(){var e=n.props.boardTitle;n.setState({newTitle:e,isOpen:!1})}),_()(N()(N()(n)),\"handleKeyDown\",function(e){13===e.keyCode?n.submitTitle():27===e.keyCode&&n.revertTitle()}),_()(N()(N()(n)),\"handleFocus\",function(e){e.target.select()}),n.state={isOpen:!1,newTitle:t.boardTitle},n}return T()(t,e),t.prototype.render=function(){var e=this.state,t=e.isOpen,n=e.newTitle,a=this.props.boardTitle;return t?E.a.createElement(\"input\",{autoFocus:!0,value:n,type:\"text\",onKeyDown:this.handleKeyDown,onChange:this.handleChange,onBlur:this.revertTitle,onFocus:this.handleFocus,className:\"board-title-input\",spellCheck:!1}):E.a.createElement(\"button\",{className:\"board-title-button\",onClick:this.handleClick},E.a.createElement(\"h1\",{className:\"board-title-text\"},a))},t}(b.Component)),we=Object(x.withRouter)(Object(g.connect)(function(e,t){var n=t.match.params.boardId;return{boardTitle:e.boardsById[n].title,boardId:n}})(Ie)),xe=(n(35),function(e){function t(){for(var t,n,a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return t=n=e.call.apply(e,[this].concat(r))||this,_()(N()(N()(n)),\"handleSelection\",function(){var e=n.props,t=e.dispatch,a=e.match,r=e.history;t({type:\"DELETE_BOARD\",payload:{boardId:a.params.boardId}}),r.push(\"/\")}),_()(N()(N()(n)),\"render\",function(){return E.a.createElement(Y.Wrapper,{className:\"board-deleter-wrapper\",onSelection:n.handleSelection},E.a.createElement(Y.Button,{className:\"board-deleter-button\"},E.a.createElement(\"div\",{className:\"modal-icon\"},E.a.createElement(Z.a,null)),E.a.createElement(\"div\",{className:\"board-header-right-text\"},\" Delete board\")),E.a.createElement(Y.Menu,{className:\"board-deleter-menu\"},E.a.createElement(\"div\",{className:\"board-deleter-header\"},\"Are you sure?\"),E.a.createElement(Y.MenuItem,{className:\"board-deleter-confirm\"},\"Delete\")))}),t||N()(n)}return T()(t,e),t}(b.Component)),De=Object(x.withRouter)(Object(g.connect)()(xe)),Te=(n(34),function(){return E.a.createElement(\"div\",{className:\"board-header\"},E.a.createElement(we,null),E.a.createElement(\"div\",{className:\"board-header-right\"},E.a.createElement(De,null)))}),Oe=(n(33),function(e){function t(t){var n;return n=e.call(this,t)||this,_()(N()(N()(n)),\"componentDidMount\",function(){var e=n.props,t=e.boardId;(0,e.dispatch)({type:\"PUT_BOARD_ID_IN_REDUX\",payload:{boardId:t}})}),_()(N()(N()(n)),\"handleDragEnd\",function(e){var t=e.source,a=e.destination,r=e.type;if(a){var i=n.props,o=i.dispatch,l=i.boardId;\"COLUMN\"!==r?t.index===a.index&&t.droppableId===a.droppableId||o({type:\"MOVE_CARD\",payload:{sourceListId:t.droppableId,destListId:a.droppableId,oldCardIndex:t.index,newCardIndex:a.index,boardId:l}}):t.index!==a.index&&o({type:\"MOVE_LIST\",payload:{oldListIndex:t.index,newListIndex:a.index,boardId:t.droppableId}})}}),_()(N()(N()(n)),\"handleMouseDown\",function(e){var t=e.target,a=e.clientX;\"list-wrapper\"!==t.className&&\"lists\"!==t.className||(window.addEventListener(\"mousemove\",n.handleMouseMove),window.addEventListener(\"mouseup\",n.handleMouseUp),n.setState({startX:a,startScrollX:window.scrollX}))}),_()(N()(N()(n)),\"handleMouseMove\",function(e){var t=e.clientX,a=n.state,r=a.startX,i=a.startScrollX,o=i-t+r;window.scrollTo(o,0);var l=window.scrollX;o!==l&&n.setState({startX:t+l-i})}),_()(N()(N()(n)),\"handleMouseUp\",function(){n.state.startX&&(window.removeEventListener(\"mousemove\",n.handleMouseMove),window.removeEventListener(\"mouseup\",n.handleMouseUp),n.setState({startX:null,startScrollX:null}))}),_()(N()(N()(n)),\"handleWheel\",function(e){var t=e.target,n=e.deltaY;\"list-wrapper\"!==t.className&&\"lists\"!==t.className&&\"open-composer-button\"!==t.className&&\"list-title-button\"!==t.className||(1===Math.sign(n)?window.scrollTo(window.scrollX+80,0):-1===Math.sign(n)&&window.scrollTo(window.scrollX-80,0))}),_()(N()(N()(n)),\"render\",function(){var e=n.props,t=e.lists,a=e.boardTitle,r=e.boardId;return E.a.createElement(E.a.Fragment,null,E.a.createElement(\"div\",{className:L()(\"board\",\"blue\")},E.a.createElement(I.Title,null,a,\" | React & Redux Kanban Board\"),E.a.createElement(B,null),E.a.createElement(Te,null),E.a.createElement(\"div\",{className:\"lists-wrapper\",onMouseDown:n.handleMouseDown,onWheel:n.handleWheel},E.a.createElement(w.DragDropContext,{onDragEnd:n.handleDragEnd},E.a.createElement(w.Droppable,{droppableId:r,type:\"COLUMN\",direction:\"horizontal\"},function(e){return E.a.createElement(\"div\",{className:\"lists\",ref:e.innerRef},t.map(function(e,t){return E.a.createElement(ve,{list:e,boardId:r,index:t,key:e._id})}),e.placeholder,E.a.createElement(Ce,{boardId:r}))}))),E.a.createElement(\"div\",{className:\"board-underlay\"})))}),n.state={startX:null,startScrollX:null},n}return T()(t,e),t}(b.Component)),Ne=Object(g.connect)(function(e,t){var n=t.board;return{lists:n.lists.map(function(t){return e.listsById[t]}),boardTitle:n.title,boardId:n._id}})(Oe),Se=Object(g.connect)(function(e,t){var n=t.match.params.boardId;return{board:e.boardsById[n]}})(function(e){return e.board?E.a.createElement(Ne,{board:e.board}):E.a.createElement(C.Redirect,{to:\"/\"})}),_e=(n(32),Object(x.withRouter)(function(){return E.a.createElement(x.Switch,null,E.a.createElement(x.Route,{exact:!0,path:\"/\",component:G}),E.a.createElement(x.Route,{path:\"/b/:boardId\",component:Se}),E.a.createElement(x.Redirect,{to:\"/\"}))})),Ae=n(11),ke=n.n(Ae),Re=function(e,t){switch(void 0===e&&(e={}),t.type){case\"ADD_CARD\":var n,a=t.payload,r=a.cardText,i=a.cardId;return ne()({},e,((n={})[i]={text:r,_id:i},n));case\"CHANGE_CARD_TEXT\":var o,l=t.payload,s=l.cardText,c=l.cardId;return ne()({},e,((o={})[c]=ne()({},e[c],{text:s}),o));case\"CHANGE_CARD_DATE\":var d,u=t.payload,p=u.date,m=u.cardId;return ne()({},e,((d={})[m]=ne()({},e[m],{date:p}),d));case\"CHANGE_CARD_COLOR\":var h,f=t.payload,b=f.color,E=f.cardId;return ne()({},e,((h={})[E]=ne()({},e[E],{color:b}),h));case\"DELETE_CARD\":var y=t.payload.cardId,v=e;return v[y],ke()(v,[y]);case\"DELETE_LIST\":var g=t.payload.cards;return Object.keys(e).filter(function(e){return!g.includes(e)}).reduce(function(t,n){var a;return ne()({},t,((a={})[n]=e[n],a))},{});default:return e}},Le=function(e,t){switch(void 0===e&&(e={}),t.type){case\"ADD_CARD\":var n,a=t.payload,r=a.listId,i=a.cardId;return ne()({},e,((n={})[r]=ne()({},e[r],{cards:e[r].cards.concat([i])}),n));case\"MOVE_CARD\":var o,l=t.payload,s=l.oldCardIndex,c=l.newCardIndex,d=l.sourceListId,u=l.destListId;if(d===u){var p,m=Array.from(e[d].cards),h=m.splice(s,1)[0];return m.splice(c,0,h),ne()({},e,((p={})[d]=ne()({},e[d],{cards:m}),p))}var f=Array.from(e[d].cards),b=f.splice(s,1)[0],E=Array.from(e[u].cards);return E.splice(c,0,b),ne()({},e,((o={})[d]=ne()({},e[d],{cards:f}),o[u]=ne()({},e[u],{cards:E}),o));case\"DELETE_CARD\":var y,v=t.payload,g=v.cardId,C=v.listId;return ne()({},e,((y={})[C]=ne()({},e[C],{cards:e[C].cards.filter(function(e){return e!==g})}),y));case\"ADD_LIST\":var I,w=t.payload,x=w.listId,D=w.listTitle;return ne()({},e,((I={})[x]={_id:x,title:D,cards:[]},I));case\"CHANGE_LIST_TITLE\":var T,O=t.payload,N=O.listId,S=O.listTitle;return ne()({},e,((T={})[N]=ne()({},e[N],{title:S}),T));case\"DELETE_LIST\":var _=t.payload.listId,A=e;return A[_],ke()(A,[_]);default:return e}},Be=function(e,t){switch(void 0===e&&(e={}),t.type){case\"ADD_LIST\":var n,a=t.payload,r=a.boardId,i=a.listId;return ne()({},e,((n={})[r]=ne()({},e[r],{lists:e[r].lists.concat([i])}),n));case\"MOVE_LIST\":var o,l=t.payload,s=l.oldListIndex,c=l.newListIndex,d=l.boardId,u=Array.from(e[d].lists),p=u.splice(s,1)[0];return u.splice(c,0,p),ne()({},e,((o={})[d]=ne()({},e[d],{lists:u}),o));case\"DELETE_LIST\":var m,h=t.payload,f=h.listId,b=h.boardId;return ne()({},e,((m={})[b]=ne()({},e[b],{lists:e[b].lists.filter(function(e){return e!==f})}),m));case\"ADD_BOARD\":var E,y=t.payload,v=y.boardTitle,g=y.boardId;return ne()({},e,((E={})[g]={_id:g,title:v,lists:[]},E));case\"CHANGE_BOARD_TITLE\":var C,I=t.payload,w=I.boardTitle,x=I.boardId;return ne()({},e,((C={})[x]=ne()({},e[x],{title:w}),C));case\"CHANGE_BOARD_COLOR\":var D,T=t.payload,O=T.boardId,N=T.color;return ne()({},e,((D={})[O]=ne()({},e[O],{color:N}),D));case\"DELETE_BOARD\":var S=t.payload.boardId,_=e;return _[S],ke()(_,[S]);default:return e}},Me=function(e,t){switch(void 0===e&&(e=null),t.type){case\"PUT_BOARD_ID_IN_REDUX\":case\"ADD_BOARD\":return t.payload.boardId;default:return e}},qe=Object(v.combineReducers)({cardsById:Re,listsById:Le,boardsById:Be,currentBoardId:Me}),je=JSON.parse(Object(f.readFileSync)(\"./dist/public/manifest.json\",\"utf8\")),Ke=Object(f.readFileSync)(\"./dist/public/main.css\",\"utf8\"),Fe=function(e,t){var n=Object(v.createStore)(qe,e.initialState),a=[];Object(w.resetContext)();var r=Object(y.renderToString)(E.a.createElement(I.HeadCollector,{headTags:a},E.a.createElement(g.Provider,{store:n},E.a.createElement(C.StaticRouter,{location:e.url,context:{}},E.a.createElement(_e,null))))),i=n.getState(),o='\\n    <!DOCTYPE html>\\n    <html>\\n      <head>\\n        <meta charset=\"UTF-8\">\\n        <meta http-equiv=\"X-UA-Compatible\" content=\"ie=edge\">\\n        <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0\">\\n        <style>'+Ke+\"</style>\\n        \"+Object(y.renderToString)(a)+'\\n      </head>\\n      <body>\\n        <div id=\"app\">'+r+\"</div>\\n      </body>\\n      <script>\\n        window.PRELOADED_STATE = \"+JSON.stringify(i)+\"\\n      <\\/script>\\n      <script src=\"+je[\"main.js\"]+\"><\\/script>\\n    </html>\\n  \";t.send(o)},Xe=n(16),He=function(e){return function(e,t,n){var a,r,i,o;e.initialState=(a={},r=new Xe.schema.Entity(\"cardsById\",{},{idAttribute:\"_id\"}),i=new Xe.schema.Entity(\"listsById\",{cards:[r]},{idAttribute:\"_id\"}),o=new Xe.schema.Entity(\"boardsById\",{lists:[i]},{idAttribute:\"_id\"}),Object(Xe.normalize)(a,[o]).entities),n()}},Pe=r()();Pe.use(d()()),Pe.use(h()(\"tiny\")),Pe.use(s()()),Pe.use(p()(\"dist/public/favicons/favicon.ico\")),Pe.use(r.a.json()),Pe.use(r.a.urlencoded({extended:!0})),Pe.use(\"/static\",r.a.static(\"dist/public\",{maxAge:\"1y\"})),Pe.use(o.a.initialize()),Pe.use(o.a.session()),Pe.use(He()),Pe.get(\"*\",Fe);var Ue=process.env.PORT||\"1337\";Pe.listen(Ue,function(){return console.log(\"Server listening on port \"+Ue)})},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){}]);","extractedComments":[]}