{"code":"module.exports=function(e){var t={};function n(a){if(t[a])return t[a].exports;var r=t[a]={i:a,l:!1,exports:{}};return e[a].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,a){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:a})},n.r=function(e){Object.defineProperty(e,\"__esModule\",{value:!0})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,\"a\",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p=\"\",n(n.s=37)}([function(e,t){e.exports=require(\"react\")},function(e,t){e.exports=require(\"@babel/runtime/helpers/builtin/assertThisInitialized\")},function(e,t){e.exports=require(\"@babel/runtime/helpers/builtin/defineProperty\")},function(e,t){e.exports=require(\"@babel/runtime/helpers/builtin/objectSpread\")},function(e,t){e.exports=require(\"@babel/runtime/helpers/builtin/inheritsLoose\")},function(e,t){e.exports=require(\"react-redux\")},function(e,t){e.exports=require(\"react-router-dom\")},function(e,t){e.exports=require(\"react-beautiful-dnd\")},function(e,t){e.exports=require(\"react-aria-menubutton\")},function(e,t){e.exports=require(\"react-textarea-autosize\")},function(e,t){e.exports=require(\"classnames\")},function(e,t){e.exports=require(\"@babel/runtime/helpers/builtin/objectWithoutProperties\")},function(e,t){e.exports=require(\"react-icons/lib/fa/trash\")},function(e,t){e.exports=require(\"@babel/runtime/helpers/builtin/extends\")},function(e,t){e.exports=require(\"shortid\")},function(e,t){e.exports=require(\"react-head\")},function(e,t){e.exports=require(\"normalizr\")},function(e,t){e.exports=require(\"express\")},function(e,t){e.exports=require(\"slugify\")},function(e,t){e.exports=require(\"react-router\")},function(e,t){e.exports=require(\"redux\")},function(e,t){e.exports=require(\"react-modal\")},function(e,t){e.exports=require(\"react-dom/server\")},function(e,t){e.exports=require(\"fs\")},function(e,t){e.exports=require(\"passport\")},function(e,t){e.exports=require(\"marked\")},function(e,t){e.exports=require(\"react-icons/lib/fa/check-square-o\")},function(e,t){e.exports=require(\"react-icons/lib/md/access-alarm\")},function(e,t){e.exports=require(\"date-fns/difference_in_calendar_days\")},function(e,t){e.exports=require(\"date-fns/format\")},function(e,t){e.exports=require(\"react-onclickoutside\")},function(e,t){e.exports=\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' width='390.4' height='390.4' viewBox='0 0 366 366'%3E%3Cdefs%3E%3ClinearGradient id='d'%3E%3Cstop offset='0' stop-color='%23d61175'/%3E%3Cstop offset='1' stop-color='%23ff2a8e'/%3E%3C/linearGradient%3E%3ClinearGradient id='c'%3E%3Cstop offset='0' stop-color='%23cdbd2d'/%3E%3Cstop offset='1' stop-color='%23fff05e'/%3E%3C/linearGradient%3E%3ClinearGradient id='b'%3E%3Cstop offset='0' stop-color='maroon'/%3E%3Cstop offset='1' stop-color='%23ff8d68'/%3E%3C/linearGradient%3E%3ClinearGradient id='a'%3E%3Cstop offset='0'/%3E%3Cstop offset='1' stop-color='%23565656'/%3E%3C/linearGradient%3E%3ClinearGradient xlink:href='%23a' id='e' x1='91.5' y1='511.362' x2='333.5' y2='122.362' gradientUnits='userSpaceOnUse'/%3E%3ClinearGradient xlink:href='%23b' id='f' x1='243' y1='370.362' x2='420' y2='122.362' gradientUnits='userSpaceOnUse'/%3E%3ClinearGradient xlink:href='%23c' id='g' x1='444.545' y1='773.264' x2='598.787' y2='721.509' gradientUnits='userSpaceOnUse' gradientTransform='matrix(.94595 0 0 1.05634 -196.297 -56.936)'/%3E%3ClinearGradient xlink:href='%23d' id='h' x1='620' y1='736.862' x2='762' y2='666.862' gradientUnits='userSpaceOnUse' gradientTransform='matrix(.94595 0 0 1.06699 -508.649 -58.015)'/%3E%3C/defs%3E%3Cg transform='translate(-158 -543.362)'%3E%3Cpath d='M24 116.362h400v400H24z' fill='url(%23e)' fill-rule='evenodd' stroke='%23000'/%3E%3Cpath opacity='.998' fill='%23565656' d='M549 304.362h25v43h-25z'/%3E%3Cpath d='M62 187.628h148v239.469H62z' opacity='.998' fill='%2300b7af'/%3E%3Cpath d='M238 187.628h148v185.469H238z' opacity='.998' fill='url(%23f)'/%3E%3Cpath d='M627 196.362a60 60 0 0 1-60 60 60 60 0 0 1-60-60 60 60 0 0 1 60-60 60 60 0 0 1 60 60zM627 316.362a60 60 0 0 1-60 60 60 60 0 0 1-60-60 60 60 0 0 1 60-60 60 60 0 0 1 60 60z' opacity='.998' fill='%2300b7af'/%3E%3Crect width='206' height='146' x='494' y='600.362' rx='15' ry='15' opacity='.998' fill='none'/%3E%3Crect width='121' height='79' x='646' y='435.362' rx='14.5' ry='12' opacity='.998' fill='%2300b7af'/%3E%3Cg transform='translate(116 -3)'%3E%3Crect ry='50' rx='50' y='546.362' x='42' height='366' width='366' opacity='.998' fill='%23505050'/%3E%3Crect ry='31.69' rx='28.378' y='579.362' x='236' height='300' width='140' opacity='.998' fill='url(%23g)'/%3E%3Crect ry='32.01' rx='33.333' y='579.362' x='75' height='223' width='140' opacity='.998' fill='url(%23h)'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E\"},function(e,t){e.exports=require(\"react-icons/lib/fa/user-secret\")},function(e,t){e.exports=require(\"morgan\")},function(e,t){e.exports=require(\"serve-favicon\")},function(e,t){e.exports=require(\"helmet\")},function(e,t){e.exports=require(\"compression\")},function(e,t,n){\"use strict\";n.r(t);var a=n(17),r=n.n(a),i=n(24),o=n.n(i),l=n(36),s=n.n(l),c=n(35),d=n.n(c),u=n(34),p=n.n(u),m=n(33),h=n.n(m),f=n(23),b=n(0),E=n.n(b),g=n(22),y=n(20),v=n(5),C=n(19),x=n(15),w=n(7),I=n(6),T=n(4),D=n.n(T),O=n(1),N=n.n(O),k=n(2),S=n.n(k),_=n(18),A=n.n(_),R=n(10),M=n.n(R),L=n(32),B=n.n(L),q=n(31),j=n.n(q),K=(n(52),function(e){function t(){for(var t,n,a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return t=n=e.call.apply(e,[this].concat(r))||this,S()(N()(N()(n)),\"render\",function(){return E.a.createElement(\"header\",null,E.a.createElement(I.Link,{to:\"/\",className:\"header-title\"},E.a.createElement(\"img\",{src:j.a,alt:\"React Redux Kanban Board\"}),\"Â React Redux Kanban Board\"),E.a.createElement(\"div\",{className:\"header-right-side\"},E.a.createElement(B.a,{className:\"guest-icon\"})))}),t||N()(n)}return D()(t,e),t}(b.Component)),P=n(14),F=n.n(P),G=n(30),H=n.n(G),X=function(e){function t(){for(var t,n,a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return t=n=e.call.apply(e,[this].concat(r))||this,S()(N()(N()(n)),\"handleClickOutside\",function(){return n.props.handleClickOutside()}),S()(N()(N()(n)),\"render\",function(){return n.props.children}),t||N()(n)}return D()(t,e),t}(b.Component),U=H()(X),z=function(e){function t(){var t;return t=e.call(this)||this,S()(N()(N()(t)),\"toggleOpen\",function(){t.setState({isOpen:!t.state.isOpen})}),S()(N()(N()(t)),\"handleChange\",function(e){t.setState({title:e.target.value})}),S()(N()(N()(t)),\"handleSubmit\",function(e){e.preventDefault();var n=t.state.title;if(\"\"!==n){var a=t.props,r=a.dispatch,i=a.history,o=a.userId,l=F.a.generate();r({type:\"ADD_BOARD\",payload:{boardTitle:n,boardId:l,userId:o}});var s=A()(n,{lower:!0});i.push(\"/b/\"+l+\"/\"+s),t.setState({isOpen:!1,title:\"\"})}}),S()(N()(N()(t)),\"handleKeyDown\",function(e){27===e.keyCode&&t.setState({isOpen:!1})}),S()(N()(N()(t)),\"render\",function(){var e=t.state,n=e.isOpen,a=e.title;return n?E.a.createElement(U,{handleClickOutside:t.toggleOpen},E.a.createElement(\"form\",{onSubmit:t.handleSubmit,className:\"board-adder\"},E.a.createElement(\"input\",{autoFocus:!0,className:\"submit-board-input\",type:\"text\",value:a,onKeyDown:t.handleKeyDown,onChange:t.handleChange,spellCheck:!1}),E.a.createElement(\"input\",{type:\"submit\",value:\"Create\",className:\"submit-board-button\",disabled:\"\"===a}))):E.a.createElement(\"button\",{onClick:t.toggleOpen,className:\"add-board-button\"},\"Add a new board...\")}),t.state={isOpen:!1,title:\"\"},t}return D()(t,e),t}(b.Component),W=Object(v.connect)(function(e){return{userId:e.user?e.user._id:\"guest\"}})(z),V=(n(51),function(e){function t(){for(var t,n,a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return t=n=e.call.apply(e,[this].concat(r))||this,S()(N()(N()(n)),\"render\",function(){var e=n.props,t=e.boards,a=e.listsById,r=e.history;return E.a.createElement(E.a.Fragment,null,E.a.createElement(x.Title,null,\"Home | React Kanban\"),E.a.createElement(K,null),E.a.createElement(\"div\",{className:\"home\"},E.a.createElement(\"div\",{className:\"main-content\"},E.a.createElement(\"h1\",null,\"Boards\"),E.a.createElement(\"div\",{className:\"boards\"},t.map(function(e){return E.a.createElement(I.Link,{key:e._id,className:M()(\"board-link\",e.color),to:\"/b/\"+e._id+\"/\"+A()(e.title,{lower:!0})},E.a.createElement(\"div\",{className:\"board-link-title\"},e.title),E.a.createElement(\"div\",{className:\"mini-board\"},e.lists.map(function(e){return E.a.createElement(\"div\",{key:e,className:\"mini-list\",style:{height:Math.min(18*(a[e].cards.length+1),100)+\"%\"}})})))}),E.a.createElement(W,{history:r})))))}),t||N()(n)}return D()(t,e),t}(b.Component)),Y=Object(v.connect)(function(e){var t=e.boardsById,n=e.listsById;return{boards:Object.keys(t).map(function(e){return t[e]}),listsById:n}})(V),J=n(13),Q=n.n(J),Z=n(9),$=n.n(Z),ee=n(8),te=n(12),ne=n.n(te),ae=(n(50),function(e){function t(t){var n;return n=e.call(this,t)||this,S()(N()(N()(n)),\"handleChange\",function(e){n.setState({newTitle:e.target.value})}),S()(N()(N()(n)),\"handleKeyDown\",function(e){13===e.keyCode?(e.preventDefault(),n.handleSubmit()):27===e.keyCode&&n.revertTitle()}),S()(N()(N()(n)),\"handleSubmit\",function(){var e=n.state.newTitle,t=n.props,a=t.listTitle,r=t.listId,i=t.dispatch;\"\"!==e&&(e!==a&&i({type:\"CHANGE_LIST_TITLE\",payload:{listTitle:e,listId:r}}),n.setState({isOpen:!1}))}),S()(N()(N()(n)),\"revertTitle\",function(){n.setState({newTitle:n.props.listTitle,isOpen:!1})}),S()(N()(N()(n)),\"deleteList\",function(){var e=n.props,t=e.listId,a=e.cards,r=e.boardId;(0,e.dispatch)({type:\"DELETE_LIST\",payload:{cards:a,listId:t,boardId:r}})}),S()(N()(N()(n)),\"openTitleEditor\",function(){n.setState({isOpen:!0})}),S()(N()(N()(n)),\"handleButtonKeyDown\",function(e){13===e.keyCode&&(e.preventDefault(),n.openTitleEditor())}),n.state={isOpen:!1,newTitle:t.listTitle},n}return D()(t,e),t.prototype.render=function(){var e=this,t=this.state,n=t.isOpen,a=t.newTitle,r=this.props,i=r.dragHandleProps,o=r.listTitle;return E.a.createElement(\"div\",{className:\"list-header\"},n?E.a.createElement(\"div\",{className:\"list-title-textarea-wrapper\"},E.a.createElement($.a,{autoFocus:!0,useCacheForDOMMeasurements:!0,value:a,onChange:this.handleChange,onKeyDown:this.handleKeyDown,className:\"list-title-textarea\",onBlur:this.handleSubmit,spellCheck:!1})):E.a.createElement(\"div\",Q()({},i,{role:\"button\",tabIndex:0,onClick:this.openTitleEditor,onKeyDown:function(t){e.handleButtonKeyDown(t),i.onKeyDown(t)},className:\"list-title-button\"}),o),E.a.createElement(ee.Wrapper,{className:\"delete-list-wrapper\",onSelection:this.deleteList},E.a.createElement(ee.Button,{className:\"delete-list-button\"},E.a.createElement(ne.a,null)),E.a.createElement(ee.Menu,{className:\"delete-list-menu\"},E.a.createElement(\"div\",{className:\"delete-list-header\"},\"Are you sure?\"),E.a.createElement(ee.MenuItem,{className:\"delete-list-confirm\"},\"Delete\"))))},t}(b.Component)),re=Object(v.connect)()(ae),ie=n(3),oe=n.n(ie),le=n(21),se=n.n(le),ce=n(29),de=n.n(ce),ue=n(28),pe=n.n(ue),me=n(27),he=n.n(me),fe=n(26),be=n.n(fe),Ee=(n(49),function(e){function t(){for(var t,n,a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return t=n=e.call.apply(e,[this].concat(r))||this,S()(N()(N()(n)),\"renderDueDate\",function(){var e=n.props.date;if(!e)return null;var t,a,r=pe()(e,new Date);return t=r<-1?Math.abs(r)+\" days ago\":-1===r?\"Yesterday\":0===r?\"Today\":1===r?\"Tomorrow\":de()(e,\"D MMM\"),a=r<0?\"red\":0===r?\"#d60\":\"green\",E.a.createElement(\"div\",{className:\"badge\",style:{background:a}},E.a.createElement(he.a,{className:\"badge-icon\"}),\"Â \",t)}),S()(N()(N()(n)),\"renderTaskProgress\",function(){var e=n.props.checkboxes,t=e.total,a=e.checked;return 0===t?null:E.a.createElement(\"div\",{className:\"badge\",style:{background:a===t?\"green\":\"#444\"}},E.a.createElement(be.a,{className:\"badge-icon\"}),\"Â \",a,\"/\",t)}),t||N()(n)}return D()(t,e),t.prototype.render=function(){return E.a.createElement(\"div\",{className:\"card-badges\"},this.renderDueDate(),this.renderTaskProgress())},t}(b.Component)),ge=(n(48),function(e){function t(){for(var t,n,a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return t=n=e.call.apply(e,[this].concat(r))||this,S()(N()(N()(n)),\"deleteCard\",function(){var e=n.props,t=e.dispatch,a=e.listId;t({type:\"DELETE_CARD\",payload:{cardId:e.card._id,listId:a}})}),t||N()(n)}return D()(t,e),t.prototype.render=function(){var e=this.props.isCardNearRightBorder;return E.a.createElement(\"div\",{className:\"options-list\",style:{alignItems:e?\"flex-end\":\"flex-start\"}},E.a.createElement(\"div\",null,E.a.createElement(\"button\",{onClick:this.deleteCard,className:\"options-list-button\"},E.a.createElement(\"div\",{className:\"modal-icon\"},E.a.createElement(ne.a,null)),\"Â Delete\")))},t}(b.Component)),ye=Object(v.connect)()(ge),ve=function(e){var t=e.match(/\\[(\\s|x)\\]/g)||[],n=t.filter(function(e){return\"[x]\"===e}).length;return{total:t.length,checked:n}},Ce=(n(47),function(e){function t(t){var n;return n=e.call(this,t)||this,S()(N()(N()(n)),\"componentWillReceiveProps\",function(e){n.setState({newText:e.card.text})}),S()(N()(N()(n)),\"handleKeyDown\",function(e){13===e.keyCode&&!1===e.shiftKey&&(e.preventDefault(),n.submitCard())}),S()(N()(N()(n)),\"submitCard\",function(){var e=n.state.newText,t=n.props,a=t.card,r=t.listId,i=t.dispatch,o=t.toggleCardEditor;\"\"===e?n.deleteCard():e!==a.text&&i({type:\"CHANGE_CARD_TEXT\",payload:{cardText:e,cardId:a._id,listId:r}}),o()}),S()(N()(N()(n)),\"handleChange\",function(e){n.setState({newText:e.target.value})}),S()(N()(N()(n)),\"toggleColorPicker\",function(){n.setState({isColorPickerOpen:!n.state.isColorPickerOpen})}),S()(N()(N()(n)),\"handleRequestClose\",function(){var e=n.state.isColorPickerOpen,t=n.props.toggleCardEditor;e||t()}),n.state={newText:t.card.text,isColorPickerOpen:!1,isTextareaFocused:!0},\"undefined\"!=typeof document&&se.a.setAppElement(\"#app\"),n}return D()(t,e),t.prototype.render=function(){var e=this,t=this.state,n=t.newText,a=t.isColorPickerOpen,r=t.isTextareaFocused,i=this.props,o=i.cardElement,l=i.card,s=i.listId,c=i.isOpen;if(!o)return null;var d=ve(n),u=o.getBoundingClientRect(),p=window.innerWidth-u.right<u.left,m=window.innerWidth<550,h={content:{top:Math.min(u.top,window.innerHeight-u.height-18),left:p?null:u.left,right:p?window.innerWidth-u.right:null,flexDirection:p?\"row-reverse\":\"row\"}};return E.a.createElement(se.a,{closeTimeoutMS:150,isOpen:c,onRequestClose:this.handleRequestClose,contentLabel:\"Card editor\",overlayClassName:\"modal-underlay\",className:\"modal\",style:m?{content:{flexDirection:\"column\",top:3,left:3,right:3}}:h,includeDefaultStyles:!1,onClick:this.handleRequestClose},E.a.createElement(\"div\",{className:\"modal-textarea-wrapper\",style:{minHeight:m?\"none\":u.height,width:m?\"100%\":u.width,boxShadow:r?\"0px 0px 3px 2px rgb(0, 180, 255)\":null,background:l.color}},E.a.createElement($.a,{autoFocus:!0,useCacheForDOMMeasurements:!0,value:n,onChange:this.handleChange,onKeyDown:this.handleKeyDown,className:\"modal-textarea\",spellCheck:!1,onFocus:function(){return e.setState({isTextareaFocused:!0})},onBlur:function(){return e.setState({isTextareaFocused:!1})}}),(l.date||d.total>0)&&E.a.createElement(Ee,{date:l.date,checkboxes:d})),E.a.createElement(ye,{isColorPickerOpen:a,card:l,listId:s,boundingRect:u,isCardNearRightBorder:p,isThinDisplay:m,toggleColorPicker:this.toggleColorPicker}))},t}(b.Component)),xe=Object(v.connect)()(Ce),we=n(25),Ie=n.n(we),Te=function(e){var t=0;return Ie()(e,{sanitize:!0,gfm:!0,breaks:!0}).replace(/<a/g,'<a target=\"_blank\"').replace(/\\[(\\s|x)\\]/g,function(e){var n;return n=\"[ ]\"===e?\"<input id=\"+t+' onclick=\"return false\" type=\"checkbox\">':\"<input id=\"+t+' checked onclick=\"return false\" type=\"checkbox\">',t+=1,n})},De=(n(46),function(e){function t(){var t;return t=e.call(this)||this,S()(N()(N()(t)),\"toggleCardEditor\",function(){t.setState({isModalOpen:!t.state.isModalOpen})}),S()(N()(N()(t)),\"handleClick\",function(e){var n=e.target,a=n.tagName,r=n.checked,i=n.id;\"input\"===a.toLowerCase()?t.toggleCheckbox(r,parseInt(i,10)):\"a\"!==a.toLowerCase()&&t.toggleCardEditor(e)}),S()(N()(N()(t)),\"handleKeyDown\",function(e){13===e.keyCode&&\"a\"!==e.target.tagName.toLowerCase()&&(e.preventDefault(),t.toggleCardEditor())}),S()(N()(N()(t)),\"toggleCheckbox\",function(e,n){var a=t.props,r=a.card,i=a.dispatch,o=0,l=r.text.replace(/\\[(\\s|x)\\]/g,function(t){var a;return a=n===o?e?\"[x]\":\"[ ]\":t,o+=1,a});i({type:\"CHANGE_CARD_TEXT\",payload:{cardId:r._id,cardText:l}})}),t.state={isModalOpen:!1},t}return D()(t,e),t.prototype.render=function(){var e=this,t=this.props,n=t.card,a=t.index,r=t.listId,i=t.isDraggingOver,o=this.state.isModalOpen,l=ve(n.text);return E.a.createElement(E.a.Fragment,null,E.a.createElement(w.Draggable,{draggableId:n._id,index:a},function(t,a){return E.a.createElement(E.a.Fragment,null,E.a.createElement(\"div\",Q()({className:M()(\"card-title\",{\"card-title--drag\":a.isDragging}),ref:function(n){t.innerRef(n),e.ref=n}},t.draggableProps,t.dragHandleProps,{onClick:function(n){t.dragHandleProps.onClick(n),e.handleClick(n)},onKeyDown:function(n){t.dragHandleProps.onKeyDown(n),e.handleKeyDown(n)},style:oe()({},t.draggableProps.style,{background:n.color})}),E.a.createElement(\"div\",{className:\"card-title-html\",dangerouslySetInnerHTML:{__html:Te(n.text)}}),(n.date||l.total>0)&&E.a.createElement(Ee,{date:n.date,checkboxes:l})),i&&t.placeholder)}),E.a.createElement(xe,{isOpen:o,cardElement:this.ref,card:n,listId:r,toggleCardEditor:this.toggleCardEditor}))},t}(b.Component)),Oe=Object(v.connect)(function(e,t){return{card:e.cardsById[t.cardId]}})(De),Ne=function(e){function t(){for(var t,n,a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return t=n=e.call.apply(e,[this].concat(r))||this,S()(N()(N()(n)),\"componentDidUpdate\",function(e){n.props.cards[n.props.cards.length-2]===e.cards[e.cards.length-1]&&n.scrollToBottom()}),S()(N()(N()(n)),\"scrollToBottom\",function(){n.listEnd.scrollIntoView()}),t||N()(n)}return D()(t,e),t.prototype.render=function(){var e=this,t=this.props,n=t.listId,a=t.cards;return E.a.createElement(w.Droppable,{droppableId:n},function(t,r){var i=r.isDraggingOver;return E.a.createElement(E.a.Fragment,null,E.a.createElement(\"div\",{className:\"cards\",ref:t.innerRef},a.map(function(e,t){return E.a.createElement(Oe,{isDraggingOver:i,key:e,cardId:e,index:t,listId:n})}),t.placeholder,E.a.createElement(\"div\",{style:{float:\"left\",clear:\"both\"},ref:function(t){e.listEnd=t}})))})},t}(b.Component),ke=Object(v.connect)(function(e,t){return{cards:e.listsById[t.listId].cards}})(Ne),Se=(n(45),function(e){function t(){var t;return t=e.call(this)||this,S()(N()(N()(t)),\"toggleCardComposer\",function(){t.setState({isOpen:!t.state.isOpen})}),S()(N()(N()(t)),\"handleChange\",function(e){t.setState({newText:e.target.value})}),S()(N()(N()(t)),\"handleKeyDown\",function(e){13===e.keyCode&&!1===e.shiftKey?t.handleSubmit(e):27===e.keyCode&&t.toggleCardComposer()}),S()(N()(N()(t)),\"handleSubmit\",function(e){e.preventDefault();var n=t.state.newText,a=t.props,r=a.listId,i=a.dispatch;\"\"!==n&&(i({type:\"ADD_CARD\",payload:{cardText:n,cardId:F.a.generate(),listId:r}}),t.toggleCardComposer(),t.setState({newText:\"\"}))}),t.state={newText:\"\",isOpen:!1},t}return D()(t,e),t.prototype.render=function(){var e=this.state,t=e.newText;return e.isOpen?E.a.createElement(U,{handleClickOutside:this.toggleCardComposer},E.a.createElement(\"form\",{onSubmit:this.handleSubmit,className:\"card-adder-textarea-wrapper\"},E.a.createElement($.a,{autoFocus:!0,useCacheForDOMMeasurements:!0,minRows:1,onChange:this.handleChange,onKeyDown:this.handleKeyDown,value:t,className:\"card-adder-textarea\",placeholder:\"Add a new card...\",spellCheck:!1,onBlur:this.toggleCardComposer}))):E.a.createElement(\"button\",{onClick:this.toggleCardComposer,className:\"add-card-button\"},\"+\")},t}(b.Component)),_e=Object(v.connect)()(Se),Ae=(n(44),function(e){function t(){for(var t,n,a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return t=n=e.call.apply(e,[this].concat(r))||this,S()(N()(N()(n)),\"render\",function(){var e=n.props,t=e.list,a=e.boardId,r=e.index;return E.a.createElement(w.Draggable,{draggableId:t._id,index:r,disableInteractiveElementBlocking:!0},function(e,n){return E.a.createElement(E.a.Fragment,null,E.a.createElement(\"div\",Q()({ref:e.innerRef},e.draggableProps,{className:\"list-wrapper\"}),E.a.createElement(\"div\",{className:M()(\"list\",{\"list--drag\":n.isDragging})},E.a.createElement(re,{dragHandleProps:e.dragHandleProps,listTitle:t.title,listId:t._id,cards:t.cards,boardId:a}),E.a.createElement(\"div\",{className:\"cards-wrapper\"},E.a.createElement(ke,{listId:t._id}))),E.a.createElement(_e,{listId:t._id})),e.placeholder)})}),t||N()(n)}return D()(t,e),t}(b.Component)),Re=Object(v.connect)()(Ae),Me=(n(43),function(e){function t(){var t;return t=e.call(this)||this,S()(N()(N()(t)),\"handleBlur\",function(){t.setState({isOpen:!1})}),S()(N()(N()(t)),\"handleChange\",function(e){t.setState({listTitle:e.target.value})}),S()(N()(N()(t)),\"handleKeyDown\",function(e){13===e.keyCode?(e.preventDefault(),t.handleSubmit()):27===e.keyCode&&t.setState({isOpen:!1,listTitle:\"\"})}),S()(N()(N()(t)),\"handleSubmit\",function(){var e=t.props,n=e.dispatch,a=e.boardId,r=t.state.listTitle,i=F.a.generate();\"\"!==r&&(n({type:\"ADD_LIST\",payload:{listTitle:r,listId:i,boardId:a}}),t.setState({isOpen:!1,listTitle:\"\"}))}),S()(N()(N()(t)),\"render\",function(){var e=t.state,n=e.isOpen,a=e.listTitle;return n?E.a.createElement(\"div\",{className:\"list\"},E.a.createElement($.a,{autoFocus:!0,useCacheForDOMMeasurements:!0,value:a,onChange:t.handleChange,onKeyDown:t.handleKeyDown,className:\"list-adder-textarea\",onBlur:t.handleBlur,spellCheck:!1})):E.a.createElement(\"button\",{onClick:function(){return t.setState({isOpen:!0})},className:\"add-list-button\"},\"Add a new list...\")}),t.state={isOpen:!1,listTitle:\"\"},t}return D()(t,e),t}(b.Component)),Le=Object(v.connect)()(Me),Be=(n(42),function(e){function t(t){var n;return n=e.call(this,t)||this,S()(N()(N()(n)),\"handleClick\",function(){n.setState({isOpen:!0})}),S()(N()(N()(n)),\"handleChange\",function(e){n.setState({newTitle:e.target.value})}),S()(N()(N()(n)),\"submitTitle\",function(){var e=n.props,t=e.dispatch,a=e.boardId,r=e.boardTitle,i=n.state.newTitle;\"\"!==i&&(r!==i&&t({type:\"CHANGE_BOARD_TITLE\",payload:{boardTitle:i,boardId:a}}),n.setState({isOpen:!1}))}),S()(N()(N()(n)),\"revertTitle\",function(){var e=n.props.boardTitle;n.setState({newTitle:e,isOpen:!1})}),S()(N()(N()(n)),\"handleKeyDown\",function(e){13===e.keyCode?n.submitTitle():27===e.keyCode&&n.revertTitle()}),S()(N()(N()(n)),\"handleFocus\",function(e){e.target.select()}),n.state={isOpen:!1,newTitle:t.boardTitle},n}return D()(t,e),t.prototype.render=function(){var e=this.state,t=e.isOpen,n=e.newTitle,a=this.props.boardTitle;return t?E.a.createElement(\"input\",{autoFocus:!0,value:n,type:\"text\",onKeyDown:this.handleKeyDown,onChange:this.handleChange,onBlur:this.revertTitle,onFocus:this.handleFocus,className:\"board-title-input\",spellCheck:!1}):E.a.createElement(\"button\",{className:\"board-title-button\",onClick:this.handleClick},E.a.createElement(\"h1\",{className:\"board-title-text\"},a))},t}(b.Component)),qe=Object(I.withRouter)(Object(v.connect)(function(e,t){var n=t.match.params.boardId;return{boardTitle:e.boardsById[n].title,boardId:n}})(Be)),je=(n(41),function(e){function t(){for(var t,n,a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return t=n=e.call.apply(e,[this].concat(r))||this,S()(N()(N()(n)),\"handleSelection\",function(){var e=n.props,t=e.dispatch,a=e.match,r=e.history;t({type:\"DELETE_BOARD\",payload:{boardId:a.params.boardId}}),r.push(\"/\")}),S()(N()(N()(n)),\"render\",function(){return E.a.createElement(ee.Wrapper,{className:\"board-deleter-wrapper\",onSelection:n.handleSelection},E.a.createElement(ee.Button,{className:\"board-deleter-button\"},E.a.createElement(\"div\",{className:\"modal-icon\"},E.a.createElement(ne.a,null)),E.a.createElement(\"div\",{className:\"board-header-right-text\"},\"Â Delete board\")),E.a.createElement(ee.Menu,{className:\"board-deleter-menu\"},E.a.createElement(\"div\",{className:\"board-deleter-header\"},\"Are you sure?\"),E.a.createElement(ee.MenuItem,{className:\"board-deleter-confirm\"},\"Delete\")))}),t||N()(n)}return D()(t,e),t}(b.Component)),Ke=Object(I.withRouter)(Object(v.connect)()(je)),Pe=(n(40),function(){return E.a.createElement(\"div\",{className:\"board-header\"},E.a.createElement(qe,null),E.a.createElement(\"div\",{className:\"board-header-right\"},E.a.createElement(Ke,null)))}),Fe=(n(39),function(e){function t(t){var n;return n=e.call(this,t)||this,S()(N()(N()(n)),\"componentDidMount\",function(){var e=n.props,t=e.boardId;(0,e.dispatch)({type:\"PUT_BOARD_ID_IN_REDUX\",payload:{boardId:t}})}),S()(N()(N()(n)),\"handleDragEnd\",function(e){var t=e.source,a=e.destination,r=e.type;if(a){var i=n.props,o=i.dispatch,l=i.boardId;\"COLUMN\"!==r?t.index===a.index&&t.droppableId===a.droppableId||o({type:\"MOVE_CARD\",payload:{sourceListId:t.droppableId,destListId:a.droppableId,oldCardIndex:t.index,newCardIndex:a.index,boardId:l}}):t.index!==a.index&&o({type:\"MOVE_LIST\",payload:{oldListIndex:t.index,newListIndex:a.index,boardId:t.droppableId}})}}),S()(N()(N()(n)),\"handleMouseDown\",function(e){var t=e.target,a=e.clientX;\"list-wrapper\"!==t.className&&\"lists\"!==t.className||(window.addEventListener(\"mousemove\",n.handleMouseMove),window.addEventListener(\"mouseup\",n.handleMouseUp),n.setState({startX:a,startScrollX:window.scrollX}))}),S()(N()(N()(n)),\"handleMouseMove\",function(e){var t=e.clientX,a=n.state,r=a.startX,i=a.startScrollX,o=i-t+r;window.scrollTo(o,0);var l=window.scrollX;o!==l&&n.setState({startX:t+l-i})}),S()(N()(N()(n)),\"handleMouseUp\",function(){n.state.startX&&(window.removeEventListener(\"mousemove\",n.handleMouseMove),window.removeEventListener(\"mouseup\",n.handleMouseUp),n.setState({startX:null,startScrollX:null}))}),S()(N()(N()(n)),\"handleWheel\",function(e){var t=e.target,n=e.deltaY;\"list-wrapper\"!==t.className&&\"lists\"!==t.className&&\"open-composer-button\"!==t.className&&\"list-title-button\"!==t.className||(1===Math.sign(n)?window.scrollTo(window.scrollX+80,0):-1===Math.sign(n)&&window.scrollTo(window.scrollX-80,0))}),S()(N()(N()(n)),\"render\",function(){var e=n.props,t=e.lists,a=e.boardTitle,r=e.boardId;return E.a.createElement(E.a.Fragment,null,E.a.createElement(\"div\",{className:M()(\"board\",\"blue\")},E.a.createElement(x.Title,null,a,\" | React & Redux Kanban Board\"),E.a.createElement(K,null),E.a.createElement(Pe,null),E.a.createElement(\"div\",{className:\"lists-wrapper\",onMouseDown:n.handleMouseDown,onWheel:n.handleWheel},E.a.createElement(w.DragDropContext,{onDragEnd:n.handleDragEnd},E.a.createElement(w.Droppable,{droppableId:r,type:\"COLUMN\",direction:\"horizontal\"},function(e){return E.a.createElement(\"div\",{className:\"lists\",ref:e.innerRef},t.map(function(e,t){return E.a.createElement(Re,{list:e,boardId:r,index:t,key:e._id})}),e.placeholder,E.a.createElement(Le,{boardId:r}))}))),E.a.createElement(\"div\",{className:\"board-underlay\"})))}),n.state={startX:null,startScrollX:null},n}return D()(t,e),t}(b.Component)),Ge=Object(v.connect)(function(e,t){var n=t.board;return{lists:n.lists.map(function(t){return e.listsById[t]}),boardTitle:n.title,boardId:n._id}})(Fe),He=Object(v.connect)(function(e,t){var n=t.match.params.boardId;return{board:e.boardsById[n]}})(function(e){return e.board?E.a.createElement(Ge,{board:e.board}):E.a.createElement(C.Redirect,{to:\"/\"})}),Xe=(n(38),Object(I.withRouter)(function(){return E.a.createElement(I.Switch,null,E.a.createElement(I.Route,{exact:!0,path:\"/\",component:Y}),E.a.createElement(I.Route,{path:\"/b/:boardId\",component:He}),E.a.createElement(I.Redirect,{to:\"/\"}))})),Ue=n(11),ze=n.n(Ue),We=function(e,t){switch(void 0===e&&(e={}),t.type){case\"ADD_CARD\":var n,a=t.payload,r=a.cardText,i=a.cardId;return oe()({},e,((n={})[i]={text:r,_id:i},n));case\"CHANGE_CARD_TEXT\":var o,l=t.payload,s=l.cardText,c=l.cardId;return oe()({},e,((o={})[c]=oe()({},e[c],{text:s}),o));case\"CHANGE_CARD_DATE\":var d,u=t.payload,p=u.date,m=u.cardId;return oe()({},e,((d={})[m]=oe()({},e[m],{date:p}),d));case\"CHANGE_CARD_COLOR\":var h,f=t.payload,b=f.color,E=f.cardId;return oe()({},e,((h={})[E]=oe()({},e[E],{color:b}),h));case\"DELETE_CARD\":var g=t.payload.cardId,y=e;return y[g],ze()(y,[g]);case\"DELETE_LIST\":var v=t.payload.cards;return Object.keys(e).filter(function(e){return!v.includes(e)}).reduce(function(t,n){var a;return oe()({},t,((a={})[n]=e[n],a))},{});default:return e}},Ve=function(e,t){switch(void 0===e&&(e={}),t.type){case\"ADD_CARD\":var n,a=t.payload,r=a.listId,i=a.cardId;return oe()({},e,((n={})[r]=oe()({},e[r],{cards:e[r].cards.concat([i])}),n));case\"MOVE_CARD\":var o,l=t.payload,s=l.oldCardIndex,c=l.newCardIndex,d=l.sourceListId,u=l.destListId;if(d===u){var p,m=Array.from(e[d].cards),h=m.splice(s,1)[0];return m.splice(c,0,h),oe()({},e,((p={})[d]=oe()({},e[d],{cards:m}),p))}var f=Array.from(e[d].cards),b=f.splice(s,1)[0],E=Array.from(e[u].cards);return E.splice(c,0,b),oe()({},e,((o={})[d]=oe()({},e[d],{cards:f}),o[u]=oe()({},e[u],{cards:E}),o));case\"DELETE_CARD\":var g,y=t.payload,v=y.cardId,C=y.listId;return oe()({},e,((g={})[C]=oe()({},e[C],{cards:e[C].cards.filter(function(e){return e!==v})}),g));case\"ADD_LIST\":var x,w=t.payload,I=w.listId,T=w.listTitle;return oe()({},e,((x={})[I]={_id:I,title:T,cards:[]},x));case\"CHANGE_LIST_TITLE\":var D,O=t.payload,N=O.listId,k=O.listTitle;return oe()({},e,((D={})[N]=oe()({},e[N],{title:k}),D));case\"DELETE_LIST\":var S=t.payload.listId,_=e;return _[S],ze()(_,[S]);default:return e}},Ye=function(e,t){switch(void 0===e&&(e={}),t.type){case\"ADD_LIST\":var n,a=t.payload,r=a.boardId,i=a.listId;return oe()({},e,((n={})[r]=oe()({},e[r],{lists:e[r].lists.concat([i])}),n));case\"MOVE_LIST\":var o,l=t.payload,s=l.oldListIndex,c=l.newListIndex,d=l.boardId,u=Array.from(e[d].lists),p=u.splice(s,1)[0];return u.splice(c,0,p),oe()({},e,((o={})[d]=oe()({},e[d],{lists:u}),o));case\"DELETE_LIST\":var m,h=t.payload,f=h.listId,b=h.boardId;return oe()({},e,((m={})[b]=oe()({},e[b],{lists:e[b].lists.filter(function(e){return e!==f})}),m));case\"ADD_BOARD\":var E,g=t.payload,y=g.boardTitle,v=g.boardId;return oe()({},e,((E={})[v]={_id:v,title:y,lists:[],color:\"blue\"},E));case\"CHANGE_BOARD_TITLE\":var C,x=t.payload,w=x.boardTitle,I=x.boardId;return oe()({},e,((C={})[I]=oe()({},e[I],{title:w}),C));case\"CHANGE_BOARD_COLOR\":var T,D=t.payload,O=D.boardId,N=D.color;return oe()({},e,((T={})[O]=oe()({},e[O],{color:N}),T));case\"DELETE_BOARD\":var k=t.payload.boardId,S=e;return S[k],ze()(S,[k]);default:return e}},Je=function(e,t){return void 0===e&&(e=null),t.type,e},Qe=function(e,t){switch(void 0===e&&(e=!1),t.type){case\"ENTER_AS_GUEST\":return!0;default:return e}},Ze=function(e,t){switch(void 0===e&&(e=null),t.type){case\"PUT_BOARD_ID_IN_REDUX\":case\"ADD_BOARD\":return t.payload.boardId;default:return e}},$e=Object(y.combineReducers)({cardsById:We,listsById:Ve,boardsById:Ye,user:Je,isGuest:Qe,currentBoardId:Ze}),et=JSON.parse(Object(f.readFileSync)(\"./dist/public/manifest.json\",\"utf8\")),tt=Object(f.readFileSync)(\"./dist/public/main.css\",\"utf8\"),nt=function(e,t){var n=Object(y.createStore)($e,e.initialState),a=[];Object(w.resetContext)();var r=Object(g.renderToString)(E.a.createElement(x.HeadCollector,{headTags:a},E.a.createElement(v.Provider,{store:n},E.a.createElement(C.StaticRouter,{location:e.url,context:{}},E.a.createElement(Xe,null))))),i=n.getState(),o='\\n    <!DOCTYPE html>\\n    <html>\\n      <head>\\n        <meta charset=\"UTF-8\">\\n        <meta http-equiv=\"X-UA-Compatible\" content=\"ie=edge\">\\n        <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0\">\\n        <style>'+tt+\"</style>\\n        \"+Object(g.renderToString)(a)+'\\n      </head>\\n      <body>\\n        <div id=\"app\">'+r+\"</div>\\n      </body>\\n      <script>\\n        window.PRELOADED_STATE = \"+JSON.stringify(i)+\"\\n      <\\/script>\\n      <script src=\"+et[\"main.js\"]+\"><\\/script>\\n    </html>\\n  \";t.send(o)},at=n(16),rt=function(e){return function(e,t,n){var a,r,i,o;e.initialState=(a={},r=new at.schema.Entity(\"cardsById\",{},{idAttribute:\"_id\"}),i=new at.schema.Entity(\"listsById\",{cards:[r]},{idAttribute:\"_id\"}),o=new at.schema.Entity(\"boardsById\",{lists:[i]},{idAttribute:\"_id\"}),Object(at.normalize)(a,[o]).entities),n()}},it=r()();it.use(d()()),it.use(h()(\"tiny\")),it.use(s()()),it.use(p()(\"dist/public/favicons/favicon.ico\")),it.use(r.a.json()),it.use(r.a.urlencoded({extended:!0})),it.use(\"/static\",r.a.static(\"dist/public\",{maxAge:\"1y\"})),it.use(o.a.initialize()),it.use(o.a.session()),it.use(rt()),it.get(\"*\",nt);var ot=process.env.PORT||\"1337\";it.listen(ot,function(){return console.log(\"Server listening on port \"+ot)})},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){}]);","extractedComments":[]}